name: Build and Deploy to GHPages
on:
   push:
      branches:
         - main
jobs:
   build-deploy:
      runs-on: ubuntu-latest
      concurrency: ci-${{github.ref}}
      steps:
       - uses: actions/checkout@v3 
         with:
            fetch-depth: 2  
       - name: Build
         run: |
            npm ci
            npm run build      
       - name: git config
         run: |
            git --version
            git config --global user.name github-actions
            git config --global user.email github-actions@github.com
            git config --global init.defaultBranch main
            git branch -la
       - name: deploy
         run: |
            git branch -la
            echo Deploying to GitHub Pages
            sh ./lib/gh_pages_deploy.sh
         
